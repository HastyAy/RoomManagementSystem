@using RoomManager.Shared.DTOs
@using Radzen
@using Radzen.Blazor
@using RoomManager.Shared.DTOs.UserDto
@inject DialogService DialogService

<RadzenTemplateForm TItem="CreateStudentRequest" Data="@Student" Submit="@OnSubmit">
    <RadzenStack Gap="1.5rem">
        <!-- Personal Information Section -->
        <RadzenFieldset Text="Personal Information">
            <RadzenRow Gap="1rem">
                <RadzenColumn Size="6">
                    <RadzenFormField Text="First Name" Variant="Variant.Outlined">
                        <RadzenTextBox @bind-Value="@Student.FirstName" Placeholder="Enter first name" Style="width: 100%;" MaxLength="50" />
                    </RadzenFormField>
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenFormField Text="Last Name" Variant="Variant.Outlined">
                        <RadzenTextBox @bind-Value="@Student.LastName" Placeholder="Enter last name" Style="width: 100%;" MaxLength="50" />
                    </RadzenFormField>
                </RadzenColumn>
            </RadzenRow>
        </RadzenFieldset>

        <!-- Academic Information Section -->
        <RadzenFieldset Text="Academic Information">
            <RadzenRow Gap="1rem">
                <RadzenColumn Size="6">
                    <RadzenFormField Text="Student Number" Variant="Variant.Outlined">
                        <RadzenTextBox @bind-Value="@Student.MatriNumber" Placeholder="Enter student number" Style="width: 100%;" MaxLength="20" />
                    </RadzenFormField>
                </RadzenColumn>
                <RadzenColumn Size="6">
                    <RadzenFormField Text="Email Address" Variant="Variant.Outlined">
                        <RadzenTextBox @bind-Value="@Student.Email" Placeholder="Enter email address" Style="width: 100%;" MaxLength="100" />
                    </RadzenFormField>
                </RadzenColumn>
            </RadzenRow>
        </RadzenFieldset>

        <!-- Preview Section -->
        @if (!string.IsNullOrEmpty(Student.FirstName) || !string.IsNullOrEmpty(Student.LastName))
        {
            <RadzenAlert Shade="Shade.Light" Variant="Variant.Flat" Size="AlertSize.Small" AlertStyle="AlertStyle.Info">
                <RadzenIcon Icon="person" />
                <strong>Preview:</strong> @GetFullName()
                @if (!string.IsNullOrEmpty(Student.MatriNumber))
                {
                    <span> • Student #@Student.MatriNumber</span>
                }
            </RadzenAlert>
        }
    </RadzenStack>

    <!-- Dialog Actions -->
    <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.End" Gap="0.5rem" Style="margin-top: 2rem;">
        <RadzenButton Text="Cancel" Click="@Cancel" ButtonStyle="ButtonStyle.Light" Disabled="@saving" />
        <RadzenButton Text="@(IsEdit ? "Update Student" : "Add Student")" ButtonType="ButtonType.Submit" 
            ButtonStyle="ButtonStyle.Primary" IsBusy="@saving" />
    </RadzenStack>
</RadzenTemplateForm>

